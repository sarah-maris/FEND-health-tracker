<!doctype html><html lang=en><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge,chrome=1"><title>Food Planner App</title><meta name=description content="App to track calorie consumption and plan healthy meals"><meta name=keywords content=nutrition,tracker,calories,healthy,foods><meta name=author content="Sarah Maris"><link href="https://fonts.googleapis.com/css?family=Open+Sans:400,800,700,400italic|Open+Sans+Condensed:300" rel=stylesheet type=text/css><link rel=stylesheet href=css/style-1150985d1a.min.css></head><body><section class=trackerApp><h1>Food Tracker</h1><div class=date-box></div><input class=new-food placeholder="Search for food item" autofocus><div class=main><table class=food-list><thead><tr><th class=food-item>food item</th><th class=calories>calories</th><th class=remove>remove</th></tr></thead></table></div><table class=table-end></table></section><section class=info><p>Double-click to edit a food item</p></section><script type=text/template id=date-template><input type="text" name="date" id="datepicker"></script><script type=text/template id=item-template><td class="food-item"><label class="view"><%= title %></label><input class="edit" value="<%= title %>"> <span style="float: right"><%= dateEaten %></span> </td> <td class="calories"><%= calories%></td> <td class="remove"><span class="destroy">x</span></td></script><script type=text/template id=stats-template><tr> <td class="calorie-count"></strong>total calories consumed today <strong></td> <td class="total-calories"><%= dailyCalories %></td> </tr></script><script src=js/lib-2595429f8e.min.js></script><script src=https://cdn.firebase.com/js/client/2.3.1/firebase.js></script><script src=https://cdn.firebase.com/libs/backbonefire/0.5.1/backbonefire.min.js></script><script>var app=app||{};app.Food=Backbone.Model.extend({defaults:{title:"",calories:100,dateEaten:"",order:0}});var app=app||{},FoodList=Backbone.Firebase.Collection.extend({model:app.Food,url:"https://food-tracker-sam.firebaseio.com",nextOrder:function(){return this.length?this.last().get("order")+1:1},comparator:function(t){return t.get("order")},dailyCalories:function(){return this.reduce(function(t,e){return t+e.get("calories")},0)}});app.foodList=new FoodList;var app=app||{};app.DatePicker=Backbone.View.extend({el:".date-box",dateTemplate:_.template($("#date-template").html()),events:{"select #datepicker":"test"},initialize:function(){this.today=new Date,this.appDate=this.prettyDate(this.today),this.render(),console.log("appDate in intitialize",this.appDate),this.$("#datepicker").datepicker("setDate",this.today)},render:function(){this.$el.html(this.dateTemplate()),this.$("#datepicker").datepicker({showOn:"both",buttonImage:"assets/images/calendar.png",buttonImageOnly:!0,buttonText:"Select date",onSelect:this.newDate})},prettyDate:function(t){return("0"+(t.getMonth()+1).toString()).substr(-2)+"/"+("0"+t.getDate().toString()).substr(-2)+"/"+t.getFullYear().toString()},newDate:function(t,e){console.log("Date changed:",t),appView.appDate=t,console.log("new date is:",appView.appDate)}});var app=app||{};app.FoodView=Backbone.View.extend({tagName:"tr",template:_.template($("#item-template").html()),events:{"dblclick label.view":"edit","click .destroy":"clear","keypress .edit":"updateOnEnter","blur .edit":"close"},initialize:function(){this.listenTo(this.model,"change",this.render),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.model,"visible",this.toggleVisible)},render:function(){return this.$el.html(this.template(this.model.attributes)),this.$input=this.$(".edit"),this},edit:function(){this.$el.addClass("editing"),this.$input.focus()},close:function(){var t=this.$input.val().trim();t?this.model.save({title:t}):this.clear(),this.$el.removeClass("editing")},updateOnEnter:function(t){t.which===ENTER_KEY&&this.close()},clear:function(){this.model.destroy()}});var app=app||{};app.AppView=Backbone.View.extend({el:".trackerApp",statsTemplate:_.template($("#stats-template").html()),events:{"keypress .new-food":"createOnEnter","select #datepicker":"test"},initialize:function(){this.$input=this.$(".new-food"),this.$tableEnd=this.$(".table-end"),this.$main=this.$(".main"),this.$list=$(".food-list"),this.listenTo(app.foodList,"add",this.addFood),this.listenTo(app.foodList,"filter",this.filterAll),this.listenTo(app.foodList,"all",this.render),app.datePicker=new app.DatePicker,this.date=app.datePicker.appDate,this.listenTo(app.datePicker.newDate,"change",this.test())},render:function(){this.$tableEnd.html(this.statsTemplate({dailyCalories:app.foodList.dailyCalories()}))},addFood:function(t){var e=new app.FoodView({model:t});this.$list.append(e.render().el)},newAttributes:function(){return console.log("appDate",this.appDate,app.datePicker.appDate),{title:this.$input.val().trim(),order:app.foodList.nextOrder(),dateEaten:this.appDate}},createOnEnter:function(t){t.which===ENTER_KEY&&this.$input.val().trim()&&(app.foodList.create(this.newAttributes()),this.$input.val(""))},test:function(){console.log("here in test app.js",this.appDate,app.datePicker.appDate)}});var app=app||{},ENTER_KEY=13;$(function(){appView=new app.AppView,window.Events={},_.extend(window.Events,Backbone.Events)});</script></body></html>